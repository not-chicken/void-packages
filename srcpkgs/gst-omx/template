# Template file for 'gst-omx'
pkgname=gst-omx
version=1.18.1
revision=1
build_style=meson
configure_args="-Ddoc=disabled"
hostmakedepends="pkg-config python glib-devel"
makedepends="gst-plugins-base1-devel"
short_desc="GStreamer OpenMAX IL wrapper plugin (1.x)"
maintainer="Orphaned <orphan@voidlinux.org>"
license="LGPL-2.1-only"
homepage="https://gstreamer.freedesktop.org"
distfiles="${homepage}/src/${pkgname}/${pkgname}-${version}.tar.xz"
checksum=42a8e0f9518b94655981ede441638f9f9395f4b1b9a4b329f068ee793975a965

case "$XBPS_TARGET_MACHINE" in
	i686*|x86_64*|aarch64*|ppc*)
		# XXX bellagio target
		configure_args+=" -Dtarget=generic"
		;;
	armv[67]*)
		configure_args+=" -Dtarget=rpi \
		 -Dheader_path=${XBPS_CROSS_BASE}/opt/vc/include/IL"
		makedepends+=" rpi-firmware rpi-userland-devel"
		;;
esac
